using UnityEngine;
using System.Collections;

public class Malware : MonoBehaviour
{

    [SerializeField]
    private PlayerController pC;
    [SerializeField]
    private float time;
    [SerializeField]
    public bool Maled;
    [SerializeField]
    private string alert;
    [SerializeField]
    private int infectionTimeframe;

    void Start()
    {
        GameObject p = GameObject.FindGameObjectWithTag("Player");
        pC = p.GetComponent<PlayerController>();
    }

    // Update is called once per frame
    void Update()
    {

    }

    public void Infect()
    {
        
        StartCoroutine(Mal());
        Maled = true;
        StartCoroutine(pC.Warner(alert));
    }


    public IEnumerator Mal()
    {
        
        Debug.Log("Time modifier recieved: " + time);
        if (!Maled)
        {
            for (int x = 0; x < infectionTimeframe; x++)
            {

                yield return new WaitForSeconds(time);

                Debug.Log("Infected Loop");

                pC.Ouch(1);
            }
        }
        Debug.Log("It Ended");
    }


}
