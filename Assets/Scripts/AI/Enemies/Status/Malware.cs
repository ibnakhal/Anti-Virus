using UnityEngine;
using System.Collections;

public class Malware : MonoBehaviour
{
    [SerializeField]
    private PlayerController pC;
    [SerializeField]
    private float time;
    [SerializeField]
    public bool Maled;
    [SerializeField]
    private string alert;

    void Start()
    {
        GameObject p = GameObject.FindGameObjectWithTag("Player");
        pC = p.GetComponent<PlayerController>();
    }

    // Update is called once per frame
    void Update()
    {

    }

    public void Infect()
    {
        Maled = true;
        StartCoroutine(Mal());
        pC.Warner(alert);
    }


    public IEnumerator Mal()
    {
        
        Debug.Log("Time modifier recieved: " + time);
        while (Maled)
        {

            yield return new WaitForSeconds(time);

            Debug.Log("Infected Loop");

            pC.Ouch(1);
        }
        Debug.Log("It Ended");
    }


}
